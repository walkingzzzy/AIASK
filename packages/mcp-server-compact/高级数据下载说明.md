# 高级数据下载说明

## 📊 数据同步情况

### ✅ 当前会自动同步的数据

**基础数据**（由 `init-database.ts` 和 `data-sync.ts` 处理）：
- 股票基础信息（5,473只A股）
- 日线K线数据（250天历史）
- 财务数据（最新财报）

### ❌ 不会自动同步的数据（需要手动下载）

**实时数据**（按需获取，不需要预下载）：
- 实时行情（价格、涨跌幅）
- 盘口数据（买卖五档）
- 分时数据

**高级历史数据**（需要运行 `init-database-full.ts`）：
- 分钟级K线（1m, 5m, 15m, 30m, 60m）
- 龙虎榜数据
- 北向资金流向
- 融资融券数据
- 大宗交易数据
- 新闻资讯

**未实现的数据**：
- 期权数据（适配器未实现）
- 股票相似度向量（需要单独实现）
- 形态识别向量（需要单独实现）

## 🚀 快速开始

### 第一步：创建高级数据表

```bash
cd packages/mcp-server-compact
npm run db:migrate
```

### 第二步：下载基础数据（如果还没有）

```bash
npm run init-db > init-database.log 2>&1 &
tail -f init-database.log
```

**预计时间**：1-2小时

### 第三步：下载高级数据

```bash
npm run init-db-full > init-database-full.log 2>&1 &
tail -f init-database-full.log
```

**预计时间**：2-4小时

## 📈 数据量说明

- **基础数据**：约137万条K线记录，约50MB
- **高级数据（30天）**：约3,459万条记录，约2-3GB
- **磁盘空间**：默认配置只需 **2-3GB**

**如果需要更长历史**：
- 1年分钟K线：约12-15GB
- 3年分钟K线：约40-50GB

## ⚠️ 重要提示

1. **默认配置很轻量**：只需2-3GB，不用担心空间问题
2. **下载时间适中**：2-4小时（取决于网络速度）
3. **支持断点续传**：脚本会自动跳过已有数据，可以随时中断后重新运行
4. **IP限制**：如果下载过快可能被封IP，脚本会自动切换数据源

## 🔄 后续同步

目前的 `data-sync.ts` 只同步基础数据（日线K线和财务数据）。

**高级数据需要定期重新运行 `init-database-full.ts`**，建议：
- 分钟K线：每周同步一次
- 龙虎榜、北向资金、大宗交易：每日同步
- 融资融券：每周同步
- 新闻：每日同步热门股票

## 📝 查看详细文档

完整说明请查看：[ADVANCED_DATA_GUIDE.md](./ADVANCED_DATA_GUIDE.md)
